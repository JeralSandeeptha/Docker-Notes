# Docker-Practice  

<br />

## Table of Contents
- [Introduction](#introduction)
- [Components](#components)
- [Container Lifecycle](#container-lifecycle)
- [Docker Images](#docker-images)
- [Docker Volumes](#docker-volumes)
- [How to setup docker for Windows](#how-to-setup-docker-for-windows)

<br /><br />

## Introduction
- Containers package an any application ignoring it's language with everything it needs to run—code, libraries, and dependencies—so it works consistently across any environment. They're lightweight, portable, and isolated, making development, deployment, and scaling much easier and faster.

### ✅ In Summary
| Feature            | Why It’s Useful                |
| ------------------ | ------------------------------ |
| **Consistency**    | Same behavior everywhere       |
| **Isolation**      | No app conflicts               |
| **Lightweight**    | Faster than VMs                |
| **Portable**       | Run anywhere                   |
| **Scalable**       | Good for microservices         |
| **CI/CD Friendly** | Easy automation                |
| **Secure**         | Controlled access to resources |

### Virtualization and Containeraization 
![Alt Text](https://res.cloudinary.com/djgwvmcdl/image/upload/v1750805053/1_mg7of1.png)

### VMs and Containers
![Alt Text](https://res.cloudinary.com/djgwvmcdl/image/upload/v1750805317/2_fkagm7.png)

<br /><br />

## Components

![Docker Components](https://res.cloudinary.com/djgwvmcdl/image/upload/v1750852961/1_bIQOZL_pZujjrfaaYlQ_gQ_jrqjee.webp)

### Running a Container from an Image
![Alt Text](https://res.cloudinary.com/djgwvmcdl/image/upload/v1750805836/3_d76raw.png)

### Build and push an Image
![Alt Text](https://res.cloudinary.com/djgwvmcdl/image/upload/v1750805836/4_lu82z8.png)

<br /><br />

## Container Lifecycle

![Image](https://res.cloudinary.com/djgwvmcdl/image/upload/v1750912804/1_os9aug.png)

<br /><br />

## Docker Images
- A Docker image is a lightweight, standalone, and executable package that contains everything needed to run a piece of software
- A Docker image is a blueprint or template for creating Docker containers.
- It includes,
 - The application code
 - Runtime environment (e.g., Node.js, Python, Java)
 - System tools and libraries
 - Configuration files

![Image](https://res.cloudinary.com/djgwvmcdl/image/upload/v1750979806/2_rm0wlu.png)

- To create a `Docker Image` we need to create a `Dockerfile` first. `Dockerfile` includes all the steps and other instructions to create the `Docker Image`
- Executes top to bottom

![Image](https://res.cloudinary.com/djgwvmcdl/image/upload/v1751125839/3_pgt6xv.png)

### Docker Layered Architecture
- We can see the layeres of a docker image. It shows all the layers and their sizes.
```docker
docker history <container_name>
```
- There are images called `Distroless Images`. It means they are minimal docker images that contain necessary runtime dependencies of apps.
![Image](https://res.cloudinary.com/djgwvmcdl/image/upload/v1751151171/4_b6zdrs.png)
- These `Ditroless Images` doesn't allows us to install unsusal things like dependencies because they are minimal images. In that case we have to use `Multi Stage Builds`
- We can not access shells in `Ditroless Images`

<br /><br />

## Docker Volumes
- A `Volume` is a Docker-managed directory on the host machine, used to persist data generated by and used by containers.
- If we run a container it includes some data. If we stop the container that data didn't exist anymore
- So how do we persist this data. The way is `Docker Volumes` (They way we can persist the data of a container lifeycle)
- We can share this volumes with other containers

~[Image](https://res.cloudinary.com/djgwvmcdl/image/upload/v1751189945/5_d9om3g.png)

### Docker Volume Commands

```cmd
docker volume ls: List all volumes.
```
```cmd
docker volume create <volume_name>: Create a new volume.
```
```cmd
docker run -d -v my-volume:/app/data --name mycontainer busybox: Run a container with a volume attached.
```
```cmd
docker volume inspect <volume_name>: Display detailed information on one or more volumes.
```
```cmd
docker volume rm <volume_name>: Remove a volume.
```
```cmd
docker volume prune: Remove all unused volumes.
```

- There are 3 types of `Volumes`
 - Annonymous Volumes
 - Bind Volumes
 - Named Volumes

#### Annonymous Volumes
- A volume that is created without a name. Docker gives it a random name. Used often in Dockerfiles
- Example
```cmd
VOLUME /data
```
- Example
```cmd
docker run -v /data busybox
```

#### Bind Volumes
- Bind mounts map a host directory or file into a container. This is useful in development when you want to reflect changes immediately.
- Structure
```cmd
docker run -v /path/on/host:/path/in/container image
```
- Example
```cmd
docker run -v $(pwd)/app:/usr/src/app node
```

#### Named Volumes
- Docker manages these volumes and stores them in a specific location (/var/lib/docker/volumes/). You just give them a name.
- Structure
```cmd
docker run -v volume_name:/path/in/container image
```
- Example
```cmd
docker volume create mydata
docker run -v mydata:/data busybox
```

| Type             | Host Path Required? | Named? | Persistence | Use Case                           |
| ---------------- | ------------------- | ------ | ----------- | ---------------------------------- |
| Bind Volume      | ✅ Yes               | ❌ No   | ✅ Yes       | Development, live file editing     |
| Named Volume     | ❌ No                | ✅ Yes  | ✅ Yes       | Production, backups, databases     |
| Anonymous Volume | ❌ No                | ❌ No   | ✅ Yes       | Temporary use, Dockerfile `VOLUME` |

<br /><br />

## How to setup Docker for Windows  
 
(01.) First we need to setup the windows before installation.
  *   Go to Windows Features  
  *   Then tick WSL(Windows Sub System for Linux) and Virtual Machine Platform
 
(02.) Then we need to restart the machine. 

(03.) Then we need to check whether WSL and VMP is correctly enabled or not. 
      For that,
  *   Go to powershell
  *   To check WSL version ----> wsl --version
  *   To check WSL         ----> wsl --install
  *   To update WSL        ----> wsl --update
  *   WSL config           ----> wsl --set-default-version 2 
  *   To windows version   ----> winver 

(04.) Donwload and install docker desktop.

(05.) Open Docker Desktop.

(06.) Sign in to Docker Hub using docker desktop.

(07.) We should start the docker desktop service in background services.

(08.) Docker Setup successful.

<br /><br />










## Docker Management Commands

docker version: Show the Docker version information.

docker info: Display system-wide information about Docker.

docker system df: Show Docker disk usage.

docker system prune: Remove unused data (containers, networks, images, volumes).

docker system prune -a: Remove all unused images not just dangling ones.

docker system prune --volumes: Remove all unused volumes.

docker system events: Get real-time events from the server.

docker system logs: Fetch the logs of a container.

## Docker Image Commands

docker images: List all images.

docker image ls: List all images.

docker image build -t <image_name> .: Build an image from a Dockerfile.

docker image pull <image_name>:<tag>: Pull an image from a registry.

docker image push <image_name>:<tag>: Push an image to a registry.

docker image rm <image_id>: Remove an image.

docker image inspect <image_name>: Display detailed information on one or more images.

## Docker Container Commands

docker ps: List running containers.

docker ps -a: List all containers (including stopped ones).

docker ps --filter name=<container_name>: Filtering options

docker create <image_name>: Create a new container from an image.

docker start <container_id>: Start a stopped container.

docker stop <container_id>: Stop a running container.

docker restart <container_id>: Restart a container.

docker rm <container_id>: Remove a container.

docker pause <container_id>: Pause a running container.

docker unpause <container_id>: Unpause a paused container.

docker exec -it <container_id> <command>: Run a command in a running container.(docker exec -it nginx sh)

docker attach <container_id>: Attach local standard input, output, and error streams to a running container.

## Docker Network Commands

docker network ls: List all networks.

docker network inspect <network_id>: Display detailed information on one or more networks.

docker network create <network_name>: Create a new network.

docker network connect <network_id> <container_id>: Connect a container to a network.

docker network disconnect <network_id> <container_id>: Disconnect a container from a network.

## Docker Docker Compose Commands

docker-compose up: Start services defined in a docker-compose.yml file.

docker-compose down: Stop services defined in a docker-compose.yml file.

docker-compose build: Build or rebuild services.

docker-compose logs: View output from services.

docker-compose exec <service_name> <command>: Execute a command in a running container.

### Docker Swarm Commands

docker swarm init: Initialize a swarm.

docker swarm join: Join a swarm as a node.

docker swarm leave: Leave the swarm.

docker node ls: List nodes in the swarm.

docker service ls: List services in the swarm.

docker service create: Create a new service.

## Docker Miscellaneous Commands

docker login: Log in to a Docker registry.

docker logout: Log out from a Docker registry.

docker search <image_name>: Search for an image on Docker Hub.

docker cp <file_path> <container_id>:<path_in_container>: Copy files or folders between a container and the local filesystem.

docker wait <container_id>: Block until a container stops, then print its exit code.
